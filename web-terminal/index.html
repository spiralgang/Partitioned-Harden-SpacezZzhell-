<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="node_modules/@xterm/xterm/css/xterm.css" />
    <script src="node_modules/@xterm/xterm/lib/xterm.js"></script>
  </head>
  <body style="background:black;margin:0;">
    <div id="terminal" style="height:100vh;width:100vw"></div>
    <script>
      const term = new Terminal({ cursorBlink: true });
      term.open(document.getElementById("terminal"));

      function connectToTerminal(url) {
        term.writeln(`Connecting to ${url}...`);
        const socket = new WebSocket(url);

        socket.onopen = () => {
          term.writeln("Connection established.");
        };

        socket.onmessage = (e) => term.write(e.data);
        socket.onerror = (err) => {
            term.writeln(`Connection error: ${err.message}`);
        };
        socket.onclose = () => {
            term.writeln("Connection closed.");
        };

        term.onData((d) => socket.send(d));
      }
    </script>
  </body>
</html>
